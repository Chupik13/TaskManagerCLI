# Task Manager - Инструкция по установке и использованию

## Установка

### Установка как глобальный инструмент .NET

1. Соберите пакет:
```bash
cd TaskManager
dotnet pack -c Release
```

2. Установите глобально:
```bash
dotnet tool install --global --add-source ./bin/Release TaskManager
```

3. Теперь команда `tm` доступна в любой директории:
```bash
tm --help
```

### Удаление

```bash
dotnet tool uninstall --global TaskManager
```

## Быстрый старт

```bash
# 1. Создайте директорию для проекта
mkdir my-project
cd my-project

# 2. Инициализируйте рабочее пространство
tm init

# 3. Добавьте заметки
tm add Купить молоко
tm add Позвонить клиенту
tm add Написать отчет

# 4. Просмотрите активные заметки
tm list

# 5. Архивируйте выполненную заметку
tm archive 1

# 6. Найдите заметку по тексту
tm find молоко

# 7. Компактизируйте ID
tm compact
```

## Работа с несколькими пространствами

```bash
# Создайте второе пространство
cd ../another-project
tm init

# Просмотрите все пространства
tm plist

# Работайте с пространством по ID из любой директории
tm add Задача в первом пространстве -p 1
tm list -p 1

# Глобальный поиск по всем пространствам
tm find отчет -g
```

## Структура файлов

После инициализации в директории создается:
```
my-project/
  .tm/              # Скрытая директория (на Windows)
    tasks.json      # Файл с заметками
```

Глобальный реестр пространств:
```
%USERPROFILE%/.tm/workspaces.json   # Windows
~/.tm/workspaces.json                # Linux/Mac
```

## Примеры команд

### Добавление заметки с длинным текстом
```bash
tm add Встреча с клиентом в 15:00 по поводу нового проекта
```

### Работа с пространством по ID
```bash
tm add Новая задача -p 2
tm list -p 2
tm remove 5 -p 2
```

### Поиск с контекстом
```bash
tm find молоко
# Вывод: ID: 3, Купить хлеб и молоко
```

### Глобальный поиск
```bash
tm find проект -g
# Ищет во всех зарегистрированных пространствах
```

## Тестирование

Запуск unit-тестов:
```bash
cd TaskManager.Tests
dotnet test
```

## Технические детали

- **Платформа**: .NET 8.0+
- **Язык**: C#
- **Формат данных**: JSON
- **Кросс-платформенность**: Windows, Linux, macOS
- **Зависимости**: Только стандартные библиотеки .NET

## Структура проекта

```
TaskManager/
  Commands/
    CommandHandler.cs       # Обработчик команд
  Models/
    Task.cs                 # Модель заметки
    Workspace.cs            # Модель пространства
  Services/
    TaskService.cs          # Сервис для работы с заметками
    WorkspaceService.cs     # Сервис для работы с пространствами
  Program.cs                # Точка входа
  TaskManager.csproj        # Файл проекта
  README.md                 # Документация

TaskManager.Tests/
  UnitTest1.cs              # Unit-тесты
```

## Решение проблем

### Ошибка: "Рабочее пространство не инициализировано"
Выполните `tm init` в текущей директории или используйте флаг `-p [id]` для работы с существующим пространством.

### Ошибка: "Пространство не найдено"
Проверьте список пространств командой `tm plist` и убедитесь, что используете правильный ID.

### Ошибка при установке global tool
Убедитесь, что путь к NuGet пакету указан корректно и что у вас установлен .NET SDK 8.0 или выше.
