# Task Manager

Консольное приложение для управления заметками в рабочих пространствах.

## Установка

### Установка как глобальный инструмент .NET

```bash
cd TaskManager
dotnet pack
dotnet tool install --global --add-source ./bin/Debug TaskManager
```

### Использование без установки

```bash
dotnet run --project TaskManager -- <команда> [аргументы]
```

## Команды

### `tm init`

Инициализирует рабочее пространство в текущей директории.

```bash
tm init
```

**Вывод:** `Рабочее пространство инициализировано с ID [id].`

### `tm add [text]`

Добавляет новую заметку.

```bash
tm add Купить молоко
tm add Сделать домашнее задание -p 1
```

**Вывод:** `Заметка добавлена с ID [id].`

### `tm list`

Показывает все активные заметки.

```bash
tm list
tm list -p 1
tm list -g
```

**Флаги:**
- `-p [id]` - показать заметки указанного пространства
- `-g` - показать заметки всех пространств

**Вывод:** Список заметок в формате `[id]: [text]` или `Нет активных заметок.`

### `tm remove [id]`

Удаляет заметку по ID.

```bash
tm remove 1
tm remove 2 -p 1
```

**Вывод:** `Заметка [id] удалена.`

### `tm archive [id]`

Архивирует заметку.

```bash
tm archive 1
tm archive 2 -p 1
```

**Вывод:** `Заметка [id] архивирована.`

### `tm compact`

Переприсваивает ID заметкам: активные начинаются с 1, архивированные с 1000.

```bash
tm compact
tm compact -p 1
```

**Вывод:** `Компактизация завершена. Активные: [count], Архивированные: [count].`

### `tm plist`

Показывает список всех рабочих пространств.

```bash
tm plist
```

**Вывод:** Список в формате `[id]: [name] ([path])` или `Нет рабочих пространств.`

### `tm premove [id]`

Удаляет рабочее пространство из глобального списка и переприсваивает ID.

```bash
tm premove 2
```

**Вывод:** `Рабочее пространство [id] удалено. ID переприсвоены.`

### `tm parchive [id]`

Архивирует рабочее пространство. Архивированное пространство не отображается в `tm plist`, все заметки в нем также архивируются. При добавлении новой заметки пространство автоматически возвращается в активное состояние.

```bash
tm parchive 2
```

**Вывод:** `Рабочее пространство [id] архивировано.`

### `tm find [text]`

Ищет текст в активных заметках.

```bash
tm find молоко
tm find молоко -p 1
tm find молоко -g
```

**Флаги:**
- `-p [id]` - поиск в указанном пространстве
- `-g` - поиск во всех пространствах

**Вывод:** `ID: [id], ...[контекст]...` или `Вхождений не найдено.`

## Примеры использования

```bash
# Инициализация рабочего пространства
cd ~/projects/my-project
tm init

# Добавление заметок
tm add Купить молоко
tm add Позвонить клиенту

# Просмотр активных заметок
tm list

# Просмотр всех заметок во всех пространствах
tm list -g

# Архивация заметки
tm archive 1

# Поиск текста
tm find молоко

# Работа с несколькими пространствами
cd ~/projects/another-project
tm init
tm add Написать отчет
tm plist
tm list -p 1

# Глобальный поиск
tm find отчет -g

# Архивация рабочего пространства
tm parchive 2

# Компактизация ID
tm compact
```

## Структура данных

### Заметка
```json
{
  "id": 1,
  "text": "Текст заметки",
  "status": "active"
}
```

### Рабочее пространство
```json
{
  "id": 1,
  "name": "my-project",
  "path": "/home/user/projects/my-project",
  "status": "active"
}
```

## Расположение файлов

- Рабочее пространство: `.tm/tasks.json` в директории проекта
- Глобальный реестр: `%USERPROFILE%/.tm/workspaces.json` (Windows) или `~/.tm/workspaces.json` (Linux/Mac)

## Требования

- .NET 8.0 или выше
